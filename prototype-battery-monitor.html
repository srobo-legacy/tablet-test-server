<!DOCTYPE html>
<html lang="en">

    <head>
        <style>
            body {
                background: black;
            }
        </style>
    </head>

    <body>
        <svg
            xmlns="http://www.w3.org/2000/svg"
            version="1.1"
            width="644"
            height="250">
            <g>
                <clipPath id="level-clip">
                    <rect
                        width="530"
                        height="180"
                        x="35"
                        y="35" />
                </clipPath>
                <rect
                    id="level-rect"
                    width="530"
                    height="180"
                    rx="22"
                    ry="22"
                    x="35"
                    y="35"
                    clip-path="url(#level-clip)"
                    style="fill:#00ff00" />
                <path
                    d="M 40,0 C 17.84,0 0,17.84 0,40 l 0,170 c 0,22.16 17.84,40 40,40 l 520,0 c 22.16,0 40,-17.84 40,-40 l 0,-21 24,0 c 11.08,0 20,-8.92 20,-20 l 0,-88 c 0,-11.08 -8.92,-20 -20,-20 l -24,0 0,-21 C 600,17.84 582.16,0 560,0 L 40,0 z m 15,25 490,0 c 16.62,0 30,13.38 30,30 l 0,140 c 0,16.62002 -13.38,30 -30,30 L 55,225 C 38.38,225 25,211.62002 25,195 L 25,55 C 25,38.38 38.38,25 55,25 z"
                    style="fill:#ffffff" />
            </g>
        </svg>

        <script>
            var maxLevel = 530;
            var levelClip = document.querySelector("svg #level-clip rect");
            var levelRect = document.querySelector("svg #level-rect");
            var level = 0;

            var change = function(delta) {
                level += delta;

                levelClip.setAttribute("width", level);

                var fillColour = "rgb(" + Math.floor((1-level/maxLevel)*255) + ", " + Math.floor((level/maxLevel)*255) + ", 0)";
                levelRect.setAttribute("style", "fill:" + fillColour);

                if (level <= maxLevel) {
                    setTimeout(change.bind(undefined, Math.floor(Math.random() * 2)), 20);
                }
            };

            change(0);
        </script>
    </body>

</html>
